(this["webpackJsonpanime-gan.js"]=this["webpackJsonpanime-gan.js"]||[]).push([[0],{26:function(e,t,a){e.exports=a(49)},31:function(e,t,a){},38:function(e,t){},39:function(e,t){},40:function(e,t){},41:function(e,t){},42:function(e,t){},43:function(e,t){},45:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(18),l=a.n(o),s=(a(31),a(6)),c=a.n(s),i=a(9),u=a(19),m=a(20),d=a(25),p=a(24),g=a(51),f=a(52),E=a(23),v=a(53),w=a(54),h=a(55),x=a(7),y=a(8),b=a(21),A=new(a.n(b).a);window.tf=x,window.tfc=y,window.progress=0,window.bytesUsed=0,x.enableProdMode();var k=window.location.href+"model_full/model.json";function S(e,t){return x.tidy((function(){for(var a=0;a<4;a++){if(0!==t[a][0]||0!==t[a][1]){var n=[-1,-1,-1,-1];n[a]=t[a][0];var r=[0,0,0,0],o=e.slice(r,n);(n=[-1,-1,-1,-1])[a]=t[a][1],(r=[0,0,0,0])[a]=e.shape[a]-t[a][1];var l=e.slice(r,n);e=x.concat([o,e,l],a)}if(t[a][0]>1||t[a][1]>1)throw new Error("Only input with no more than length one in padding is supported. We have: "+JSON.stringify(t))}return e}))}window.mirrorPadFunc=S;var U=[.00023367749587460492,.054088046653978504,.1804816724673639,.18052037621199904,.2528568019649621,.37458444400475477,.39315031021211105,.39319017797911254,.4444196766347441,.5207431700988491,.550593651422125,.5542242372745627,.5605664132978859,.5806242652109398,.5927784050567816,.5962346785553008,.5981026434950807,.5989430676647844,.6435568450337933,.6676838282371483,.6684442258671517,.7463103400111626,.9019785470675509,.95],I=0,O=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n,r,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=.9*(performance.now()-void 0)/15463.61999999499,a=I>=U.length?.95:U[I],I+=1,window.progress=a,n=x.memory(),console.log("Memory Info:",n),window.bytesUsed=n.numBytes,e.next=9,x.nextFrame();case 9:if("reflect"===t.attrs.mode){e.next=11;break}throw new Error("Only reflect mode is supported. Mode: "+t.attrs.mode);case 11:if(r=t.inputs[1],4!==t.inputs[0].shape.length){e.next=20;break}return e.next=15,r.array();case 15:return o=e.sent,l=t.inputs[0],e.abrupt("return",S(l,o));case 20:throw new Error("Only input of rank 4 is supported. We have: "+JSON.stringify(r.arraySync()));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();y.registerOp("MirrorPad",O);var C=function(){var e=Object(i.a)(c.a.mark((function e(t,a,n,r){var o,l,s,i,u,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(n);case 2:return o=e.sent,l=x.browser.fromPixels(o).toFloat(),s=x.image.resizeBilinear(l,a).div(255).expandDims(0),i=performance.now(),e.next=8,t.executeAsync({test:s});case 8:return u=e.sent,m=performance.now(),x.browser.toPixels(u.squeeze().add(1).div(2),r),u.dispose(),s.dispose(),e.abrupt("return",m-i);case 14:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.loadGraphModel(k);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=document.createElement("canvas")).width=256,a.height=256,e.next=5,A.resize(t,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(c.a.mark((function e(t,a,n,r,o){var l,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.ENV.set("WEBGL_FORCE_F16_TEXTURES",!0),x.setBackend(o),"s"===t?l=[100,100]:"m"===t?l=[250,250]:"l"===t&&(l=[500,500]),e.next=5,B();case 5:return s=e.sent,e.next=8,C(s,l,document.getElementById(n),document.getElementById(r));case 8:return i=e.sent,s.dispose(),x.disposeVariables(),window.progress=1,e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t,a,n,r,o){return e.apply(this,arguments)}}(),N=(a(44),a(45),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onUpload=function(e){var t=e.target,a=new FileReader;a.onload=function(){var e=a.result;n.setState({uploadedImageURL:e,uploaded:!0})},a.readAsDataURL(t.files[0])},n.generate=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===n.state.generationStatus){e.next=2;break}return e.abrupt("return");case 2:if(!1!==n.state.uploaded){e.next=5;break}return alert("Please upload an image."),e.abrupt("return");case 5:if("none"!==n.state.resize){e.next=8;break}return alert("Please select a resize method."),e.abrupt("return");case 8:return window.progress=0,window.bytesUsed=0,t=setInterval((function(){n.setState({generationProgress:100*window.progress,bytesUsed:window.bytesUsed}),1!==n.state.generationStatus&&clearInterval(t)}),500),n.setState({generationStatus:1,updateGenerationProgressInterval:t}),a=!1,e.prev=13,e.next=16,G(n.state.resize,n.state.fp16,"uploaded-image","output",n.state.tfBackend);case 16:a=!0,e.next=23;break;case 19:e.prev=19,e.t0=e.catch(13),alert("Error encountered while generating image: "+e.t0),n.setState({generationStatus:0});case 23:a&&n.setState({generationStatus:2});case 24:case"end":return e.stop()}}),e,null,[[13,19]])}))),n.componentWillUnmount=function(){-1!==n.state.updateGenerationProgressInterval&&clearInterval(n.state.updateGenerationProgressInterval)},n.state={uploadedImageURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",uploaded:!1,fp16:0,resize:"none",generationStatus:0,updateGenerationProgressInterval:-1,bytesUsed:0,tfBackend:"cpu"},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app"},r.a.createElement(g.a,{fluid:!0,style:{display:0===this.state.generationStatus?"block":"none"}},r.a.createElement(f.a,{className:"margin"},r.a.createElement(E.a,null),r.a.createElement(E.a,{xs:"12"},r.a.createElement("h1",{style:{marginBottom:"20px",textAlign:"center"}},"Avatar")),r.a.createElement(E.a,null)),r.a.createElement(f.a,{className:"margin"},r.a.createElement(E.a,null),r.a.createElement(E.a,{xs:"12",md:"8",lg:"6"},r.a.createElement(v.a,null,r.a.createElement(v.a.File,{accept:"image/*",label:this.state.uploaded?"Change the image":"Upload an image",onChange:this.onUpload,multiple:!1,custom:!0}))),r.a.createElement(E.a,null)),r.a.createElement(f.a,{className:"margin"},r.a.createElement(E.a,null),r.a.createElement(E.a,{xs:"12",md:"8",lg:"5",xl:"4",style:{textAlign:"center",margin:"20px"}},r.a.createElement("img",{id:"uploaded-image",alt:"",src:this.state.uploadedImageURL})),r.a.createElement(E.a,null)),r.a.createElement(f.a,{className:"margin"},r.a.createElement(E.a,null),r.a.createElement(E.a,{xs:"12",md:"8",lg:"6",style:{textAlign:"center"}},r.a.createElement(v.a,null,r.a.createElement(v.a.Group,{controlId:"resize"},r.a.createElement(v.a.Control,{defaultValue:"none",as:"select",onChange:function(t){return e.setState({resize:t.target.value})}},r.a.createElement("option",{value:"none",disabled:!0},"Select Generated Image Size"),r.a.createElement("option",{value:"s"},"Small (Fast)"),r.a.createElement("option",{value:"m"},"Medium"),r.a.createElement("option",{value:"l"},"Large (Slow)"))),r.a.createElement(v.a.Group,{controlId:"tfBackend"},r.a.createElement(v.a.Control,{as:"select",onChange:function(t){return e.setState({tfBackend:t.target.value})}},r.a.createElement("option",{value:"cpu"},"CPU backend for rendering (Lower Speed - For devices with weak configuration)"),r.a.createElement("option",{value:"webgl"},"WebGL backend for rendering (100x Faster Speed - For devices with strong configuration)"))),r.a.createElement(w.a,{variant:"primary",onClick:this.generate},"Generate"))),r.a.createElement(E.a,null))),r.a.createElement("div",{className:"overlay",style:{display:1===this.state.generationStatus?"block":"none"}},r.a.createElement("div",{style:{marginTop:"calc( 50vh - 50px )",height:"100px",textAlign:"center"}},r.a.createElement(g.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(E.a,null),r.a.createElement(E.a,{xs:"12",md:"8",lg:"6",style:{textAlign:"center"}},r.a.createElement(h.a,{now:this.state.generationProgress,style:{margin:"10px"}}),r.a.createElement("p",null,"Generating image..."),r.a.createElement("p",null,"This may take few minutes depending on your device."),r.a.createElement("p",null,"Memory usage (MB): ",this.state.bytesUsed/1e6," ")),r.a.createElement(E.a,null))))),r.a.createElement("div",{className:"overlay",style:{display:2===this.state.generationStatus?"block":"none"}},r.a.createElement(g.a,{fluid:!0},r.a.createElement(f.a,{className:"margin"},r.a.createElement(E.a,null),r.a.createElement(E.a,{xs:"12",md:"8",lg:"5",xl:"4",style:{textAlign:"center",margin:"20px"}},r.a.createElement("canvas",{id:"output"})),r.a.createElement(E.a,null)),r.a.createElement(f.a,{className:"margin"},r.a.createElement(E.a,null),r.a.createElement(E.a,{xs:"12",md:"12",lg:"12",xl:"10",style:{textAlign:"center",margin:"20px"}},r.a.createElement(w.a,{variant:"primary",onClick:function(){return window.location.reload()}},"Restart")),r.a.createElement(E.a,null)))))}}]),a}(r.a.Component));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),function(){var e=performance.now();y.loadGraphModel(k).then((function(t){console.log("Model Loaded");var a=performance.now();console.log("Took ".concat((a-e)/1e3," s to load the model")),t.dispose()}))}()}},[[26,1,2]]]);
//# sourceMappingURL=main.b4817aef.chunk.js.map