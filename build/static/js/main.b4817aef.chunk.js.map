{"version":3,"sources":["generate.js","App.js","index.js"],"names":["pica","Pica","window","tf","tfc","progress","bytesUsed","MODEL_URL","location","href","mirrorPadFunc","input","pad_arr","i","slice_size","slice_begin","padding_left","slice","shape","padding_right","Error","JSON","stringify","progressesList","num_called","mirrorPad","node","performance","now","start","length","memoryInfo","console","log","numBytes","attrs","mode","pad_tensor","inputs","array","arraySync","generate","model","scaled_size","img","output","resizeImage","img_new","img_tensor","fromPixels","toFloat","scaled_img_tensor","resizeBilinear","div","expandDims","executeAsync","generated","end","toPixels","squeeze","add","dispose","loadModel","a","resizedCanvas","document","createElement","width","height","resize","generateImage","fp16","img_id","canvas_id","tf_backend","set","getElementById","processing_time","App","props","onUpload","e","target","reader","FileReader","onload","dataURL","result","setState","uploadedImageURL","uploaded","readAsDataURL","files","state","generationStatus","alert","updateGenerationProgressInterval","setInterval","generationProgress","clearInterval","success","tfBackend","componentWillUnmount","className","Container","fluid","style","this","Row","Col","xs","textAlign","md","lg","Form","File","accept","label","onChange","multiple","custom","xl","margin","id","alt","src","Group","controlId","Control","defaultValue","as","value","disabled","Button","variant","onClick","ProgressBar","reload","React","Component","ReactDOM","render","StrictMode","model_load_start","then","model_load_end","preHeat"],"mappings":"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","file":"static/js/main.b4817aef.chunk.js","sourcesContent":["import * as tf from '@tensorflow/tfjs';\nimport * as tfc from '@tensorflow/tfjs-converter';\nimport Pica from 'pica';\n\nconst pica = new Pica();\n\nwindow.tf = tf;\nwindow.tfc = tfc;\nwindow.progress = 0;\nwindow.bytesUsed = 0;\n\ntf.enableProdMode();\n\nlet start;\n\nconst MODEL_URL = window.location.href + 'model_full/model.json';\n\nfunction mirrorPadFunc(input, pad_arr) {\n    return tf.tidy(() => {\n        for (let i = 0; i < 4; i++) {\n            if (pad_arr[i][0] !== 0 || pad_arr[i][1] !== 0) {\n                let slice_size = [-1, -1, -1, -1];\n                slice_size[i] = pad_arr[i][0];\n                let slice_begin = [0, 0, 0, 0];\n\n                let padding_left = input.slice(slice_begin, slice_size);\n\n                slice_size = [-1, -1, -1, -1];\n                slice_size[i] = pad_arr[i][1];\n                slice_begin = [0, 0, 0, 0];\n                slice_begin[i] = input.shape[i] - pad_arr[i][1];\n\n                let padding_right = input.slice(slice_begin, slice_size);\n\n                input = tf.concat([padding_left, input, padding_right], i);\n            }\n\n            if (pad_arr[i][0] > 1 || pad_arr[i][1] > 1) {\n                throw new Error(\"Only input with no more than length one in padding is supported. We have: \" + JSON.stringify(pad_arr));\n            }\n        }\n        return input;\n    });\n}\n\n// For debugging purpose:\nwindow.mirrorPadFunc = mirrorPadFunc;\n\nconst progressesList = [0.00023367749587460492, 0.054088046653978504, 0.1804816724673639, 0.18052037621199904, 0.2528568019649621, 0.37458444400475477, 0.39315031021211105, 0.39319017797911254, 0.4444196766347441, 0.5207431700988491, 0.550593651422125, 0.5542242372745627, 0.5605664132978859, 0.5806242652109398, 0.5927784050567816, 0.5962346785553008, 0.5981026434950807, 0.5989430676647844, 0.6435568450337933, 0.6676838282371483, 0.6684442258671517, 0.7463103400111626, 0.9019785470675509, 0.95];\nlet num_called = 0;\n\nconst mirrorPad = async (node) => {\n    let progress = 0.9 * (performance.now() - start)/(15463.61999999499);\n\n    /* progressesList.push(progress);\n    console.log(progressesList); */\n\n    if (num_called >= progressesList.length) {\n        progress = 0.95;\n    } else {\n        progress = progressesList[num_called];\n    }\n    num_called += 1;\n\n    window.progress = progress;\n\n    let memoryInfo = tf.memory();\n    console.log(\"Memory Info:\", memoryInfo);\n    window.bytesUsed = memoryInfo.numBytes;\n\n    // Use normal pad (not mirror pad):\n    // return tf.pad(node.inputs[0], node.inputs[1].arraySync(), 0);\n\n    await tf.nextFrame();\n\n    if (node.attrs.mode !== \"reflect\") {\n        throw new Error(\"Only reflect mode is supported. Mode: \" + node.attrs.mode);\n    }\n    let pad_tensor = node.inputs[1];\n    // node.inputs[1].print();\n    if (node.inputs[0].shape.length === 4) {\n        let pad_arr = await pad_tensor.array();\n        let input = node.inputs[0];\n        return mirrorPadFunc(input, pad_arr);\n    } else {\n        throw new Error(\"Only input of rank 4 is supported. We have: \" + JSON.stringify(pad_tensor.arraySync()));\n    }\n};\n\ntfc.registerOp('MirrorPad', mirrorPad);\n\nconst generate = async (model, scaled_size, img, output) => {\n    const img_new = await resizeImage(img)\n\n    const img_tensor = tf.browser.fromPixels(img_new).toFloat();\n    let scaled_img_tensor = tf.image.resizeBilinear(img_tensor, scaled_size).div(255).expandDims(0);\n\n    let start = performance.now();\n    let generated = await model.executeAsync({'test': scaled_img_tensor});\n    let end = performance.now();\n\n    tf.browser.toPixels((generated.squeeze().add(1)).div(2), output);\n    generated.dispose();\n    scaled_img_tensor.dispose();\n\n    return end - start;\n}\n\nlet preHeat = () => {\n    let model_load_start = performance.now();\n    tfc.loadGraphModel(MODEL_URL).then((model) => {\n        console.log(\"Model Loaded\");\n        let model_load_end = performance.now();\n        console.log(`Took ${(model_load_end - model_load_start)/1000} s to load the model`);\n        model.dispose();\n    });\n}\n\nconst loadModel = async () => {\n    const model = await tf.loadGraphModel(MODEL_URL);\n    return model;\n}\nconst resizeImage = async (img) => {\n    const resizedCanvas = document.createElement('canvas');\n    resizedCanvas.width = 256;\n    resizedCanvas.height = 256;\n    return await pica.resize(img, resizedCanvas);\n}\n\nconst generateImage = async (resize, fp16, img_id, canvas_id, tf_backend) => {\n    tf.ENV.set('WEBGL_FORCE_F16_TEXTURES', true);\n\n    tf.setBackend(tf_backend);\n\n    let scaled_size;\n\n    if (resize === \"s\") {\n        scaled_size = [100, 100];\n    } else if (resize === \"m\") {\n        scaled_size = [250, 250];\n    } else if (resize === \"l\") {\n        scaled_size = [500, 500];\n    }\n\n    const model = await loadModel();\n    const processing_time = await generate(model, scaled_size, document.getElementById(img_id), document.getElementById(canvas_id));\n    model.dispose();\n    tf.disposeVariables();\n\n    window.progress = 1.0;\n\n    return processing_time;\n};\n\nexport {preHeat, generateImage};\n","import React from 'react';\nimport { Button, Form, Container, Row, Col, ProgressBar } from 'react-bootstrap';\nimport { generateImage } from './generate.js';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            uploadedImageURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=\",\n            uploaded: false,\n            fp16: 0,\n            resize: \"none\",\n            generationStatus: 0,\n            updateGenerationProgressInterval: -1,\n            bytesUsed: 0,\n            tfBackend: \"cpu\"\n        };\n    }\n\n    onUpload = (e) => {\n        var input = e.target;\n        var reader = new FileReader();\n        reader.onload = () => {\n            var dataURL = reader.result;\n            this.setState({\n                uploadedImageURL: dataURL,\n                uploaded: true\n            });\n        };\n        reader.readAsDataURL(input.files[0]);\n    }\n\n    generate = async () => {\n        if (this.state.generationStatus !== 0) {\n            return;\n        }\n\n        if (this.state.uploaded === false) {\n            alert(\"Please upload an image.\");\n            return;\n        }\n        if (this.state.resize === \"none\") {\n            alert(\"Please select a resize method.\");\n            return;\n        }\n        \n        window.progress = 0;\n        window.bytesUsed = 0;\n        let updateGenerationProgressInterval = setInterval(() => {\n            this.setState({\n                generationProgress: window.progress * 100,\n                bytesUsed: window.bytesUsed\n            });\n\n            if (this.state.generationStatus !== 1) {\n                clearInterval(updateGenerationProgressInterval);\n            }\n        }, 500);\n\n\n        this.setState({\n            generationStatus: 1,\n            updateGenerationProgressInterval: updateGenerationProgressInterval\n        });\n        let success = false;\n        try {\n            await generateImage(this.state.resize, this.state.fp16, \"uploaded-image\", \"output\", this.state.tfBackend);\n            success = true;\n        } catch (error) {\n            alert(\"Error encountered while generating image: \" + error);\n            this.setState({\n                generationStatus: 0\n            });\n        }\n\n        if (success) {\n            this.setState({\n                generationStatus: 2\n            });\n        }\n        \n    }\n    \n    componentWillUnmount = () => {\n        if (this.state.updateGenerationProgressInterval !== -1) {\n            clearInterval(this.state.updateGenerationProgressInterval);\n        }\n    }\n    \n    render () {\n        return (\n            <div className=\"app\">\n                <Container fluid style={{\"display\": this.state.generationStatus === 0 ? \"block\" : \"none\"}}>\n                    <Row className=\"margin\">\n                        <Col/>\n                            <Col xs=\"12\">\n                                <h1 style={{\"marginBottom\": \"20px\", textAlign: \"center\"}}>Avatar</h1>\n                            </Col>\n                        <Col/>\n                    </Row>\n                    <Row className=\"margin\">\n                        <Col/>\n                        <Col xs=\"12\" md=\"8\" lg=\"6\">\n                            <Form>\n                                <Form.File accept=\"image/*\" label={(this.state.uploaded ? \"Change the image\" : \"Upload an image\")} onChange={this.onUpload} multiple={false} custom />\n                            </Form>\n                            \n                        </Col>\n                        <Col/>\n                    </Row>\n                    <Row className=\"margin\">\n                        <Col/>\n                        <Col xs=\"12\" md=\"8\" lg=\"5\" xl=\"4\" style={{textAlign: \"center\", margin: \"20px\"}}>\n                            <img id=\"uploaded-image\" alt=\"\" src={this.state.uploadedImageURL} />\n                        </Col>\n                        <Col/>\n                    </Row>\n                    <Row className=\"margin\">\n                        <Col/>\n                        <Col xs=\"12\" md=\"8\" lg=\"6\" style={{textAlign: \"center\"}}>\n                            <Form>\n                                <Form.Group controlId=\"resize\">\n                                    <Form.Control defaultValue=\"none\" as=\"select\" onChange={(e) => this.setState({resize: e.target.value})}>\n                                        <option value=\"none\" disabled>Select Generated Image Size</option>\n                                        <option value=\"s\">Small (Fast)</option>\n                                        <option value=\"m\">Medium</option>\n                                        <option value=\"l\">Large (Slow)</option>\n                                    </Form.Control>\n                                </Form.Group>\n                                <Form.Group controlId=\"tfBackend\">\n                                    <Form.Control as=\"select\" onChange={(e) => this.setState({tfBackend: e.target.value})}>\n                                        <option value=\"cpu\">CPU backend for rendering (Lower Speed - For devices with weak configuration)</option>\n                                        <option value=\"webgl\">WebGL backend for rendering (100x Faster Speed - For devices with strong configuration)</option>\n                                    </Form.Control>\n                                </Form.Group>\n                                <Button variant=\"primary\" onClick={this.generate}>Generate</Button>\n                            </Form>\n                        </Col>\n                        <Col/>\n                    </Row>\n                </Container>\n\n                <div className=\"overlay\" style={{\"display\": this.state.generationStatus === 1 ? \"block\" : \"none\"}}>\n                \n                    <div style={{\"marginTop\":\"calc( 50vh - 50px )\", \"height\": \"100px\", \"textAlign\": \"center\"}}>\n                        <Container fluid>\n                            <Row>\n                                <Col/>\n                                <Col xs=\"12\" md=\"8\" lg=\"6\" style={{textAlign: \"center\"}}>\n                                    <ProgressBar now={this.state.generationProgress} style={{\"margin\": \"10px\"}} />\n                                    <p>Generating image...</p>\n                                    <p>This may take few minutes depending on your device.</p>\n                                    <p>Memory usage (MB): {this.state.bytesUsed / 1000000} </p>\n                                </Col>\n                                <Col/>\n                            </Row>\n                        </Container>\n                    </div>\n                    \n                </div>\n\n                <div className=\"overlay\" style={{\"display\": this.state.generationStatus === 2 ? \"block\" : \"none\"}}>\n                    <Container fluid>\n                        <Row className=\"margin\">\n                            <Col/>\n                            <Col xs=\"12\" md=\"8\" lg=\"5\" xl=\"4\" style={{textAlign: \"center\", margin: \"20px\"}}>\n                                <canvas id=\"output\"></canvas>\n                            </Col>\n                            <Col/>\n                        </Row>\n                        <Row className=\"margin\">\n                            <Col/>\n                            <Col xs=\"12\" md=\"12\" lg=\"12\" xl=\"10\" style={{textAlign: \"center\", margin: \"20px\"}}>\n                                <Button variant=\"primary\" onClick={() => window.location.reload()}>Restart</Button>\n                            </Col>\n                            <Col/>\n                        </Row>\n                    </Container>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport { preHeat } from './generate.js';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\npreHeat();\n"],"sourceRoot":""}